<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/calcular_dieta.css">
    <link rel="stylesheet" href="./Dashboard_dieta.html">
    <link href="index.html">
    <link href="calcular_dieta.html">
    <link href="login_cadastro.html">
    <title>Calcular dieta</title>
</head>

<body>
    <header>
        <nav class="nav">
            <span class="logo"><img src="img/logo.png" alt=""></span>
            <ul class="menu">
                <li><a href="index.html">
                    Home
                </a></li>
                <li><a href="login_cadastro.html">
                    Cadastro
                </a></li>
                <li><a href="calcular_dieta.html">
                    Calcular dieta
                </a></li>
            </ul>
        </nav>
    </header>

    <div id="div_1">

        <div id="div_2" class="container">


                <section class="section">

                    <select id="select_genero" class="select_genero">
                        <option selected disabled value="">
                            Selecione o genero
                        </option>
                        <option value="masculino">
                            Masculino
                        </option>
                        <option value="feminino">
                            Feminino
                        </option>
                    </select><br>


                    <select id="select_biotipo" class="select_biotipo">
                        <option value="" selected disabled value="">
                            Selecione o biotipo
                        </option>
                        <option value="ectomorfo">
                            Ectomorfo
                        </option>
                        <option value="mesomorfo">
                            Mesomorfo
                        </option>
                        <option value="endomorfo">
                            Endomorfo
                        </option>
                    </select><br>

                    <input id="input_peso" class="input_peso" placeholder="Peso em Kg"><br>

                    <input id="input_altura" class="input_altura" placeholder="Altura em cm"><br>

                    <input id="input_idade" class="input_idade" placeholder="Idade"><br>


                    <select id="select_nivel_atividade" class="select_nivel_atividade">
                        <option value="" selected disabled value="">
                            Nivel de atividade Fisica
                        </option>
                        <option value="sedentario">
                            sedentário (Exercicio mínimo)
                        </option>
                        <option value="levemente_ativo">
                            Levemente ativo (1-3 dias por semana)
                        </option>
                        <option value="moderadamente_ativo">
                            Moderadamente ativo (3-5 dias por semana)
                        </option>
                        <option value="muito_ativo">
                            Muito ativo (6-7 dias por semana)
                        </option>
                        <option value="extremamente_ativo">
                            extremamente ativo (Atleta, 2 vezes por dia)
                        </option>
                    </select><br>

                    <select id="select_objetivo" class="select_objetivo">
                        <option value="" selected disabled value="">
                            Objetivo
                        </option>
                        <option value="emagrecer_rapido">
                            Emagrecer rápido
                        </option>
                        <option value="emagrecer">
                            Emagrecer
                        </option>
                        <option value="manter_peso">
                            Manter o peso
                        </option>
                        <option value="ganhos_moderados">
                            Ganhos moderados
                        </option>
                        <option value="ganhos_agressivos">
                            Ganhos agressivos
                        </option>
                    </select><br>

                    <select id="forma_fisico" class="forma_fisico">
                        <option selected disabled value="">
                            Forma física
                        </option>
                        <option value="magro">
                            Magro(a)
                        </option>
                        <option value="definido">
                            Masa magra e baixo percentual de gordura
                        </option>
                        <option value="falso_magro">
                            Falso(a) magro(a)
                        </option>
                        <option value="acima_peso">
                            Muito acima do peso
                        </option>
                    </select><br>

                    <button onclick="calcular()" class="botao">
                        Calcular
                    </button>
                </section>
            

            <img class="img_calcularDieta" src="img/Foto_calculadora.webp" alt="">


        </div>


    </div>

    <div id="div_guiaCalculadora" class="como usar">

        <div class="container">
            
            <main>
                <h1>Saiba como calcular suas calorias diarias</h1><br>

                <p>
                    Nosso objetivo é simplificar sua vida na hora de determinar os macronutrientes necessários para montar uma dieta personalizada. Abaixo, você encontrará um guia passo a passo para ajudá-lo a entender como usar nossa calculadora de forma eficiente e alcançar seus objetivos de uma dieta personalizada e uma vida saudável.
                </p><br>

                <section>
                    <h2>Passo 1: Sexo</h2><br>

                    <p>Selecione seu sexo entre as opções:</p>
                    <ul class="ul">
                        <li >Feminino</li>
                        <li>Masculino</li>
                    </ul>
                </section><br>

                <section>
                    <h2>Passo 2: Biotipo</h2><br>

                    <p>Escolha o biotipo que melhor representa sua tendência genética:</p>
                    <ul class="ul">
                        <li>Ectomorfo: Tendência a emagrecer facilmente.</li>
                        <li>Mesomorfo: Tendência a ser atlético e ganhar massa muscular.</li>
                        <li>Endomorfo: Tendência a ganhar peso facilmente.</li>
                    </ul>
                    <p>Lembre-se, isso é apenas uma tendência geral para ajudar na personalização da sua dieta.</p>
                </section><br>

                <section>
                    <h2>Passo 3: Altura e Peso</h2><br>

                    <p>Informe sua altura em centímetros e seu peso em quilogramas.</p>
                </section><br>

                <section>
                    <h2>Passo 4: Idade</h2><br>

                    <p>Insira sua idade.</p>
                </section><br>

                <section>
                    <h2>Passo 5: Taxa Metabólica Basal (TMB)</h2><br>

                    <p>A TMB é a quantidade de calorias que seu corpo gasta para manter funções vitais em repouso completo (por exemplo, se você ficasse 24 horas dormindo). Nossa calculadora estima sua TMB com base nas informações fornecidas.</p>
                </section><br>

                <section>
                    <h2>Passo 6: Nível de Atividade</h2><br>

                    <p>Selecione o nível que melhor descreve sua rotina diária:</p>
                    <ul class="ul">
                        <li>Sedentário: Praticamente não se movimenta ou faz alguma atividade.</li>
                        <li>Levemente ativo: Exercícios leves 1-3 vezes por semana.</li>
                        <li>Moderadamente ativo: Exercícios moderados 3-5 vezes por semana.</li>
                        <li>Muito ativo: Exercícios pesados/esportes 6-7 vezes por semana.</li>
                        <li>Extremamente ativo: Exercícios muito pesados, treinando duas vezes ao dia (provavelmente não é o seu caso, mas está aqui para os mais dedicados!).</li>
                    </ul>
                </section><br>

                <section>
                    <h2>Passo 7: Total Daily Energy Expenditure (TDEE)</h2><br>

                    <p>Com base no seu nível de atividade, a calculadora determinará seu TDEE, que é a quantidade média de calorias que seu corpo gasta diariamente para manter as funções vitais e realizar atividades cotidianas.</p>
                </section><br>
                
                <section>
                    <h2>Passo 8: Objetivo</h2><br>

                    <p>Escolha seu objetivo:</p>
                    <ul class="ul">
                        <li>Emagrecer rápido</li>
                        <li>Emagrecer</li>
                        <li>Manter peso</li>
                        <li>Ganhar massa muscular (Ganhos secos)</li>
                        <li>Ganhos agressivos</li>
                    </ul>
                    <p>As opções de "emagrecer", "manter" e "ganhos secos" são consideradas as mais saudáveis e sustentáveis. Um processo mais lento e controlado que é mais eficaz a longo prazo.</p>
                </section><br>

                <section>
                <h2>Passo 9: Consumo Diário de Calorias</h2><br>

                    <p>Com base no seu objetivo, a calculadora indicará quantas calorias você deve consumir por dia:</p>
                    <ul class="ul">
                        <li>Para ganhar peso: Calorias acima do seu TDEE.</li>
                        <li>Para manter o peso: Calorias iguais ao seu TDEE.</li>
                        <li>Para emagrecer: Calorias abaixo do seu TDEE.</li>
                    </ul>
                </section><br>
                
                <section>
                    <h2>Passo 10: Estado Atual</h2><br>

                    <p>Informe seu estado atual para uma recomendação mais precisa:</p>
                    <ul class="ul">
                        <li>Magro(a)</li>
                        <li>Massa magra considerável e BF (Body Fat) não muito alto</li>
                        <li>Falso(a) Magro(a)</li>
                        <li>Muito acima do peso</li>
                    </ul>

                </section><br>

                <section>
                    <h2>Passo 11: Macronutrientes Diários</h2><br>
                    <p>A calculadora fornecerá a quantidade diária recomendada de:</p>
                    <ul class="ul">
                        <li>Proteína: Com base na sua massa magra.</li>
                        <li>Gordura: Com base no seu peso total.</li>
                        <li>Carboidratos: Calculados subtraindo a proteína e a gordura das calorias totais.</li>
                    </ul>
                </section><br>

                <section>
                    <h2>Utilize a Calculadora e Alcance Seus Objetivos</h2> <br>

                    <p>Esperamos que esta ferramenta simplifique seu planejamento alimentar e ajude você a alcançar seus objetivos de saúde e estéticos. Navegue pelo nosso site, explore nossos recursos e use a Calculadora Simplificada de Dieta Flexível para ajustar sua dieta de acordo com suas necessidades individuais.</p>
                    <p>Estamos aqui para apoiar você em cada passo da sua jornada fitness. Comece agora e veja como é fácil montar uma dieta personalizada que se encaixe perfeitamente no seu estilo de vida e objetivos!</p>
                </section>
            </main>
        </div>
    

    </div>

</body>

</html>
<script>
    function calcular() {
        const genero = select_genero.value
        const peso = Number(input_peso.value)
        const altura = Number(input_altura.value)
        const idade = Number(input_idade.value)
        const biotipo = select_biotipo.value

            

        let taxaMetabolismoBasal = 0
        let gasto_Biotipo = 0
        if (genero == "masculino") {
            taxaMetabolismoBasal = 66.5 + 14 * peso + 5 * altura - 6.7 * idade

            if (biotipo == "ectomorfo") {
                gasto_Biotipo = 1.04
                taxaMetabolismoBasal = taxaMetabolismoBasal * gasto_Biotipo

            } else if (biotipo == "mesomorfo") {
                gasto_Biotipo = 1.02
                taxaMetabolismoBasal = taxaMetabolismoBasal * gasto_Biotipo

            }
        } else {
            taxaMetabolismoBasal = 665 + (9.6 * peso) + (1.8 * altura) - (4.7 * idade)

            if (biotipo == "ectomorfo") {
                gasto_Biotipo = 1.04
                taxaMetabolismoBasal = taxaMetabolismoBasal * gasto_Biotipo

            } else if (biotipo == "mesomorfo") {
                gasto_Biotipo = 1.02
                taxaMetabolismoBasal = taxaMetabolismoBasal * gasto_Biotipo

            }
        }


        let tmb = taxaMetabolismoBasal.toFixed(1) 

        const nivel_atividade = select_nivel_atividade.value
        let gast_nivelAtividade = 0
        if (nivel_atividade == "sedentario") {
            gast_nivelAtividade = tmb * 1.20
        } else if (nivel_atividade == "levemente_ativo") {
            gast_nivelAtividade = tmb * 1.30
        } else if (nivel_atividade == "moderadamente_ativo") {
            gast_nivelAtividade = tmb * 1.42
        } else if (nivel_atividade == "muito_ativo") {
            gast_nivelAtividade = tmb * 1.55
        } else {
            gast_nivelAtividade = tmb * 1.80
        }


        let tdee = gast_nivelAtividade // Quantide calorias que voce gasta no seu dia (TDEE)
        

        const objetivo = select_objetivo.value
        let dieta = 0
        if (objetivo == "emagrecer_rapido") {
            dieta = tdee * 0.70
        } else if (objetivo == "emagrecer") {
            dieta = tdee * 0.85
        } else if (objetivo == "ganhos_moderados") {
            dieta = tdee * 1.07
        } else if (objetivo == "ganhos_agressivos") {
            dieta = tdee * 1.15
        }

        
        let qtd_caloriasDiaria = dieta  // Quantidade de calorias diarias a serem consumidas

        let proteina = 0
        let carboidrato = 0
        let gordura = peso * 0.8

        const forma_fisica = forma_fisico.value
        if (forma_fisica == "magro") {
            proteina = peso * 2
            carboidrato = (qtd_caloriasDiaria - ((proteina * 4) + (gordura * 9))) / 4
            alert(`${proteina}, ${gordura}, ${carboidrato.toFixed()}`)

        } else if (forma_fisica == "definido") {
            proteina = peso * 2.6
            carboidrato = (qtd_caloriasDiaria - ((proteina * 4) + (gordura * 9))) / 4
            alert(`${proteina}, ${gordura}, ${carboidrato.toFixed()}`)

        } else if (forma_fisica == "falso_magro") {
            proteina = peso * 2.2
            carboidrato = (qtd_caloriasDiaria - ((proteina * 4) + (gordura * 9))) / 4
            alert(`${proteina}, ${gordura}, ${carboidrato.toFixed()}`)
            
        } else if (forma_fisica == "acima_peso") {
            proteina = peso * 1.8
            carboidrato = (qtd_caloriasDiaria - ((proteina * 4) + (gordura * 9))) / 4
            alert(`${proteina}, ${gordura}, ${carboidrato.toFixed()}`)
            
        }
        
        console.log(qtd_caloriasDiaria)
        //fetch 
        // var nomeVar = input_nome.value;
        // var emailVar = input_email.value;
        // var senhaVar = input_senha.value;
        // var confirmacaoSenhaVar = input_repita_senha.value;

        // var tmb = 
        // var tdee =   

        // var peso = 
        // var proteina = 
        // var carboidrato =
        // var gordura = 
        // var qtd_caloriasDiarias 
        // var fkUsuario =
        let idUsuario = sessionStorage.ID_REPRESENTANTE;
        console.log(tdee.toFixed())

        // tmb = tmb.toFixed()
        tdee = tdee.toFixed()
        proteina = proteina.toFixed()
        carboidrato = carboidrato.toFixed()
        gordura = gordura.toFixed()
        qtd_caloriasDiaria = qtd_caloriasDiaria.toFixed()
    


        fetch("/calculadora/cadastrar", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({

            pesoServer: peso,
            tmbServer: tmb,
            tdeeServer: tdee,
            proteinaServer: proteina,
            carboidratoServer: carboidrato,
            gorduraServer: gordura,
            qtd_caloriasDiariaServer: qtd_caloriasDiaria,
            fkUsuarioServer: idUsuario

        }),
        })
        .then(function (resposta) {
            console.log("resposta: ", resposta);

            if (resposta.ok) {
            
                alert('Cadastro realizado com sucesso!');

            setTimeout(() => {
                window.location = "/Dashboard_dieta.html"
            }, "2000");

            } else {
            throw "Houve um erro ao tentar realizar o cadastro!";
            alert(`Houve um erro ao tentar realizar o cadastro!`);
            }
        })
        .catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            alert(`#ERRO: ${resposta}`);
        });

        return false;
    }
</script>