<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/dashdieta.css">
  <link rel="shortcut icon" href="imagens/favicon2.ico" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="index.html">
  <link href="calcular_dieta.html">
  <link href="login_cadastro.html">
  <title>Dieta personalizada</title>
  
</head>

<body class="container" onload="ExibirTeste()">
  <div class="container">
    <div class="navigation">
      <ul>

        <li class="list ">
          <a href="#">
            <span class="icon"><ion-icon name="logo-pinterest"></ion-icon></ion-icon></span>
            <span class="title">Dashboard</span>
          </a>
        </li>

        <li class="list active">
          <a href="index.html">
            <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
            <span class="title">Home</span>
          </a>
        </li>

        <li class="list">
          <a href="calcular_dieta.html">
            <span class="icon"><ion-icon name="accessibility-outline"></ion-icon></span>
            <span class="title">Calcular dieta</span>
          </a>
        </li>

        <li class="list">
          <a href="login_cadastro.html">
            <span class="icon"><ion-icon name="log-in-outline"></ion-icon></span>
            <span class="title">Sair</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="perfil">
      <div class="nome_dashboard">
        <b>Dashboard<br>
          <br><br>

          <select id="select_mês" class="select_mês">
            <option selected disabled>
              Mês de atualização do peso
            </option>
            <option value="janeiro">
              Janeiro
            </option>
            <option value="fevereiro">
              Fevereiro
            </option>
            <option value="março">
              Março
            </option>
            <option value="abril">
              Abril
            </option>
            <option value="maio">
              Maio
            </option>
            <option value="junho">
              Junho
            </option>
            <option value="julho">
              Julho
            </option>
            <option value="agosto">
              Agosto
            </option>
            <option value="setembro">
              Setembro
            </option>
            <option value="outubro">
              Outubro
            </option>
            <option value="novembro">
              Novembro
            </option>
            <option value="dezembro">
              Dezembro
            </option>
          </select><br>
          
          <select id="select_dia" class="select_dia">
            <option selected disabled value="">
              Dia de atualização do peso
            </option>
            <option value="1">
              1
            </option>
            <option value="2">
              2
            </option>
            <option value="3">
              3
            </option>
            <option value="4">
              4
            </option>
            <option value="5">
              5
            </option>
            <option value="6">
              6
            </option>
            <option value="7">
              7
            </option>
            <option value="8">
              8
            </option>
            <option value="9">
              9
            </option>
            <option value="10">
              10
            </option>
            <option value="11">
              11
            </option>
            <option value="12">
              12
            </option>
            <option value="13">
              13
            </option>
            <option value="14">
              14
            </option>
            <option value="15">
              15
            </option>
            <option value="16">
              16
            </option>
            <option value="17">
              17
            </option>
            <option value="18">
              18
            </option>
            <option value="19">
              19
            </option>
            <option value="20">
              20
            </option>
            <option value="21">
              21
            </option>
            <option value="22">
              22
            </option>
            <option value="23">
              23
            </option>
            <option value="24">
              24
            </option>
            <option value="25">
              25
            </option>
            <option value="26">
              26
            </option>
            <option value="27">
              27
            </option>
            <option value="28">
              28
            </option>
            <option value="29">
              29
            </option>
            <option value="30">
              30
            </option>
            <option value="31">
              31
            </option>
          </select>
          
          <input type="text" id="input_pesoSelecionado" class="input_pesoSelecionado" placeholder="Insira o peso do mês selecionado"><br>
          <input type="number" id="input_pesoDesejado" class="input_pesoDesejado" placeholder="Insira o peso desejado"><br>
          <input type="number" id="input_pesoAtualizado" class="input_pesoAtualizado" placeholder="Insira o peso atualizado"><br>
        </b><br>
      </div>    
    </div>

    <div class="dash">

      <div class="alinhar">
        <div class="card-kpi-basal">
          <span>Taxa de metabolismo basal</span>
          <h1><span id="span_recebeTmb"></span> calorias</h1>
        </div>


        <div class="card-kpi-tdee">
          <span>Tdee</span>
          <h1><span id="span_recebeTdee"></span> calorias</h1>
        </div>
        

        <div class="container_botao_caloriasDiarias">
          <div id="div_kpi" class="card-kpi-caloriasDiarias">
            <span><b>Quantidade de calorias diarias</b></span>
            <h1><span id="span_recebeQtd_caloriasDiaria"></span> calorias</h1>
          </div>

          <div>
            <span id="span_btn">
              <button class="bt" onclick="qtd_calorias()"></button>
              <button class="bt" onclick="imc()"></button>
            </span>
          </div>
        </div>

      </div>

      <div class="alinhar">
        <div class="grafico">
          <canvas id="grafico_coluna"></canvas>
        </div>

        <div id="trocar_grafico" class="grafico">
          <canvas id="grafico_linha_temperatura"></canvas>
        </div>

        <div>
          <div class="card-kpi-proteina">
            <span><b>Proteina</b></span>
            <span id="span_recebeProteina"><b>g</b></span>
          </div>
          
          <div class="card-kpi-carboidrato">
            <span><b>Carboidrato </b></span>
            <span id="span_recebeCarboidrato"><b>g</b></span>
          </div>
  
          <div class="card-kpi-gordura">
            <span><b>Gordura</b></span>
            <span><b id="span_recebeGordura">g</b></span>
          </div>
        </div>        

      </div>

    </div>

  </div>
  
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <script>
    const list = document.querySelectorAll('.list');
    function activeLink() {
      list.forEach((item) =>
        item.classList.remove('active'));
      this.classList.add('active');
    }

    list.forEach((item) =>
      item.addEventListener('click', activeLink));
  </script>
</body>
<script>

  const mes = select_mês.value 
  const dia = select_dia.value 
  const pesoSelecionado = Number(input_pesoSelecionado.value) 
  const pesoDesejado = Number(input_pesoDesejado.value) 
  
  const grafico_linha_temperatura = document.getElementById('grafico_linha_temperatura');
  
  
  const pesoAtualizado = Number(input_pesoAtualizado.value)
  
  new Chart(grafico_linha_temperatura, {
    type: 'line',
    data: {
      labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31'],
      datasets: [
        {
          label: 'Atualização do peso diario',
          
          data: [100,100 ,100 , , , , , , , , , , , , , , , , , , , , , , , , , , , , ],
          borderWidth: 1
        }]

    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

  const grafico_coluna = document.getElementById('grafico_coluna');

  new Chart(grafico_coluna, {
    type: 'line',
    data: {
      labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'jul', 'jul', 'ago', 'set', 'out', 'nov', 'dez'],
      datasets: [{
        label: 'Peso desejado ',
        data: [, , , , , , , , , , , ],
        borderWidth: 1
      },
      {
        label: 'Peso atual',
        data: [100, 100, , , , , , , , , , ],
        borderWidth: 1
      }]

    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });



</script>

</html>
<script>
  function qtd_calorias() {
   
    span_btn.innerHTML = `<button class= "bt" onclick="qtd_calorias()"></button>
                          <button class= "bt" onclick="imc()"></button>`;

    div_kpi.innerHTML = `<span><b>Quantidade de calorias diarias</b></span>
                         <h1>${2000} calorias</h1>`;
  }

  function imc() {
    
    span_btn.innerHTML = `<button class= "bt" onclick="qtd_calorias()"></button>
                          <button class= "bt" onclick="imc()"></button>`;

    div_kpi.innerHTML = `<span><b>Índice de Massa Corporal</b></span><span>
                         <h2>${2000}</h2>`;
  }

  // span_recebeTmb.innerHTML = `${tmb}`
  // span_recebeTdee.innerHTML = `${Tdee}`
  // span_recebeQtd_caloriasDiaria.innerHTML = `${Qtd_caloriasDiaria}`
  // span_recebeProteina.innerHTML = `${proteina}`
  // span_recebeProteina.innerHTML = `${carboidrato}`
  // span_recebeProteina.innerHTML = `${gordura}`

  let idRepresentante = sessionStorage.ID_REPRESENTANTE
  
  function ExibirTeste() {

        var idQuest = sessionStorage.getItem("ID_USUARIO");
        fetch(`/calculadora/exibir`, { 
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ idUsuario: idRepresentante })
  }) 
  .then(response => {
    if (!response.ok) {
      return response.json().then(error => { 
        throw new Error(error.message); 
      });
    }
    return response.json();
  })
  .then(resultado => { 
      // Aqui a resposta está pronta
      // Agora você pode acessar os dados do formulário
      
    resultado.forEach(resultado =>{
    
    span_recebeTmb.innerHTML = `${resultado.tmb}`
    span_recebeTdee.innerHTML = `${resultado.tdee}`
    span_recebeQtd_caloriasDiaria.innerHTML = `${resultado.qtd_caloriasDiarias}`
    span_recebeProteina.innerHTML = `${resultado.proteina}`
    span_recebeCarboidrato.innerHTML = `${resultado.carboidrato}`
    span_recebeGordura.innerHTML = `${resultado.gordura}`


      console.log(resultado)

    // ...
})
   
  })
  .catch(error => console.error('Erro ao buscar os dados das contas:', error));
    }

</script>